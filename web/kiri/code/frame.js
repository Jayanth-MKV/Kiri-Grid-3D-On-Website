"use strict";"undefined"==typeof self&&(this.self=this),function(){self.module||(self.module={exports:{}});let e=Date.now(),n=()=>((Date.now()-e)/1e3).toFixed(2).padStart(9,0),u=self.dbug=self.dbug||{level:1,set:e=>{0<=e&&(u.level=Math.min(e,3))},debug:function(){if(u.level<=0)return console.log(n(),"[DBG]",...arguments)},log:function(){if(u.level<=1)return console.log(n(),"|",...arguments)},warn:function(){if(u.level<=2)return console.log(n(),"[WRN]",...arguments)},error:function(){if(u.level<=3)return console.trace(n(),"[ERR]",...arguments)},since:n};self.noop=()=>{};let t=self.gapp=self.gapp||{},l=[];function o(e){return{funcs:e.filter(e=>"function"==typeof e),arrays:e.filter(e=>Array.isArray(e)),strings:e.filter(e=>"string"==typeof e),objects:e.filter(e=>"object"==typeof e&&!Array.isArray(e))}}t.overlay=Object.assign,t.register=function(){var e=o([...arguments]),n=e.strings[0],t,n={fn:e.funcs[0],name:n};l.push(n)},t.main=function(){var e=o([...arguments]),n=e.strings[0];const t=e.funcs[0],r=e.funcs[1];var s=self,f;r&&r(s);for(f of l){let{fn:l,name:o}=f;if(o&&u.debug(n+" | load | "+o),l){let e=o.split("."),n=e.pop(),t=s;for(var i of e)t=t[i]||(u.debug({creating_root:i,for:o}),t[i]={});let r=t[n]||{};l(s,e=>{if(e)return t[n]=Object.assign(r,e)})}else u.debug(`${n} | ${f.name} | missing fn()`)}l=null,t&&t(s)}}();"use strict";!function(){let e=self.kiri=self.kiri||{},t,n,o={},a;function r(e){return document.getElementById(e)}function c(e){t=e,n=e.contentWindow}function s(e){n.postMessage(e,a)}function i(e){var{origin:t,source:s,target:a,data:r}=e;let n=o[r.event];n&&n(r.data,r.event),l.onmessage&&l.onmessage(r,e)}let l=e.frame={setFrame:(e,t)=>{var s=typeof e;switch(a=t,s){case"string":c(r(e));break;case"object":c(e);break;default:throw"invalid frame type "+s}window.addEventListener("message",e=>{var{origin:t,source:s,target:a,data:r}=e;s.window===n&&i(e)})},send:s,load:e=>{s({load:e})},clear:()=>{s({clear:!0})},parse:(e,t)=>{s({parse:e,type:t})},get:e=>{s({get:e})},setMode:e=>{s({mode:e})},setDevice:e=>{s({device:e})},setProcess:e=>{s({process:e})},setFeatures:e=>{s({features:e})},setController:e=>{s({controller:e})},slice:()=>{s({function:"slice",callback:!0})},prepare:()=>{s({function:"prepare",callback:!0})},export:e=>{s({function:"export",callback:!!e})},onmessage:()=>{},progress:(e,t)=>{s({progress:e,message:t})},alert:(e,t)=>{s({alert:e,time:t})},emit:(e,t)=>{s({emit:e,message:t})},onevent:(e,t)=>{o[e]=t,s({event:e})}};l.on=l.onevent}();